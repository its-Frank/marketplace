<%- include('_header') %>

<div class="container mt-5">
  <h1 class="mb-4">Welcome, <%= user.name %></h1>

  <% if (successMessage) { %>
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <%= successMessage %>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  <% } %>

  <div class="row">
    <div class="col-md-4">
      <div class="card mb-4 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Profile</h5>
          <p class="card-text"><strong>Email:</strong> <%= user.email %></p>
          <p class="card-text">
            <strong>Skills:</strong> <%= user.skills || 'Not specified' %>
          </p>
          <p class="card-text">
            <strong>Location:</strong> <%= user.location || 'Not specified' %>
          </p>
          <p class="card-text">
            <strong>Bio:</strong> <%= user.bio || 'No bio added yet' %>
          </p>
          <a href="/edit-profile" class="btn btn-primary btn-sm"
            >Edit Profile</a
          >
        </div>
      </div>
    </div>

    <div class="col-md-8">
      <div class="card mb-4 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Active Bids</h5>
          <ul class="list-group list-group-flush">
            <% activeBids.forEach(function(bid) { %>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              <%= bid.job_title %>
              <span class="badge bg-primary rounded-pill"
                >$<%= bid.amount %></span
              >
            </li>
            <% }); %> <% if (activeBids.length === 0) { %>
            <li class="list-group-item">No active bids</li>
            <% } %>
          </ul>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Ongoing Jobs</h5>
          <ul class="list-group list-group-flush">
            <% ongoingJobs.forEach(function(job) { %>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              <%= job.title %>
              <span class="badge bg-success rounded-pill">In Progress</span>
            </li>
            <% }); %> <% if (ongoingJobs.length === 0) { %>
            <li class="list-group-item">No ongoing jobs</li>
            <% } %>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('_footer') %>
